<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.community.petish.mypage.mapper.DefaultMapper">
	
	<!-- 내가 작성한 글 -->
	<select id="getMyWritings" resultType="com.community.petish.mypage.dto.MyWritingsDTO" parameterType="long">
		select id, title, created_date, view_count
		from dog_free_post_tb
		where user_id=#{user_id} and deleted=0
	</select>
	
	<!-- 내가 댓글 단 글 -->
	<select id="getCommented" resultType="com.community.petish.mypage.dto.Writings_CommentedDTO" parameterType="long">
		select dfpt.id, dfpt.user_id, dfpt.title, dfpt.created_date, dfpt.view_count, u.nickname
		from dog_free_post_tb dfpt, user_tb u
		where dfpt.id in (select post_id from dog_free_comment_tb where user_id=#{user_id}) and dfpt.user_id=u.id and dfpt.deleted=0
	</select>
	
	<!-- 내가 좋아요 한 글 -->
	<select id="getLiked" resultType="com.community.petish.mypage.dto.Writings_LikedDTO" parameterType="long">
		select dfpt.id, dfpt.user_id, dfpt.title, dfpt.created_date, dfpt.view_count, u.nickname
		from dog_free_post_tb dfpt, user_tb u
		where dfpt.id in (select post_id from dog_free_post_like_tb where user_id=#{user_id}) and dfpt.user_id=u.id and dfpt.deleted=0
	</select>
</mapper>










































	